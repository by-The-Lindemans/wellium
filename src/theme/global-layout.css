/*----------------------------------------------
  GLOBAL LAYOUT – wellium
----------------------------------------------*/

/* Safe-area helpers (no Android fallback now that overlay is off) */
:root {
    --wl-safe-top: max(var(--ion-safe-area-top, 0px), env(safe-area-inset-top, 0px));
    --wl-safe-right: env(safe-area-inset-right, 0px);
    --wl-safe-bottom: max(var(--ion-safe-area-bottom, 0px), env(safe-area-inset-bottom, 0px));
    --wl-safe-left: env(safe-area-inset-left, 0px);
}

/* Make any camera/video fills behave nicely by default */
#root video {
    object-fit: cover;
}

/* Full-viewport shell */
html,
body,
ion-app,
ion-router-outlet,
ion-page {
    block-size: 100%;
    inline-size: 100%;
    margin: 0;
}

/* ----- centered titles ----- */
ion-toolbar ion-title {
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
    margin: 0;
    font-family: "Code New Roman", "Courier New", monospace;
    font-weight: 500;
    color: #7f7f7f;
}

.dashboard-title {
    font-size: 2rem;
}

/* Header: no extra top padding (WebView already sits below status bar) */
ion-header,
ion-toolbar {
    --padding-top: 0;
    --min-height: 56px;
    /* standard Material toolbar height */
    --justify-content: center;
}

/* ----- page content: center until it needs to scroll ----- */
/* Let ion-content itself manage horizontal padding only */
ion-content {
    --padding-start: 0;
    --padding-end: 0;
}

/* The scrollable part acts as a grid that centers when there's space,
   and naturally scrolls once content exceeds viewport height */
ion-content::part(scroll) {
    display: grid;
    grid-auto-flow: row;
    gap: 16px;
    justify-items: center;
    /* horizontal centering of children */
    place-content: center;
    /* centers stack when space allows */
    min-block-size: 100%;
    /* key to “center until overflow” */
    padding-block: 0 var(--wl-safe-bottom);
    /* no extra top; honor bottom inset */
    padding-inline: clamp(12px, 4vw, 24px);
    overscroll-behavior: contain;
    text-align: center;
}

/* Scanner sizing WITHOUT adding classes:
   - :has() matches generic wrappers with a direct <video>/<canvas>
   - IDs are common html5-qrcode defaults as fallbacks */
@supports selector(:has(*)) {

    ion-content::part(scroll)>div:has(> video),
    ion-content::part(scroll)>div:has(> canvas) {
        width: min(92vw, 520px);
        min-width: 240px;
        aspect-ratio: 3 / 4;
        border-radius: 12px;
        overflow: hidden;
        background: #000;
    }
}

/* Fallback when :has is unavailable */
ion-content::part(scroll)>#html5-qrcode,
ion-content::part(scroll)>#qr-reader,
ion-content::part(scroll)>#reader {
    width: min(92vw, 520px);
    min-width: 240px;
    aspect-ratio: 3 / 4;
    border-radius: 12px;
    overflow: hidden;
    background: #000;
}

/* Ensure camera fills its box */
ion-content::part(scroll) video,
ion-content::part(scroll) canvas {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

/* ----- list & item niceties ----- */
ion-item>ion-label:not([slot="end"]),
ion-item[lines="none"]>ion-label:not([slot="end"]) {
    width: 100% !important;
    flex: 1 1 auto !important;
    min-width: 0 !important;
}

ion-item.wl-copy {
    --padding-start: 0;
    --padding-end: 0;
    --inner-padding-start: 0;
    --inner-padding-end: 0;
    --min-height: auto;
    --inner-border-width: 0;
}

/* Treat non-interactive, line-less items as “copy rows” */
ion-item[lines="none"]:not([button]):not([detail]):not([href]) {
    --padding-start: 0 !important;
    --padding-end: 0 !important;
    --inner-padding-start: 0 !important;
    --inner-padding-end: 0 !important;
    --min-height: auto;
    --inner-border-width: 0;
    --background-focused: transparent;
    --background-hover: transparent;
}

ion-item[lines="none"]:not([button]):not([detail]):not([href]) ion-text,
ion-item[lines="none"]:not([button]):not([detail]):not([href]) p {
    width: 100%;
    text-align: center;
    margin: 0;
    padding-inline: clamp(8px, 2vw, 16px);
}

/* Optional: remove extra list padding */
ion-list {
    padding: 0;
}

/* Centered intro rows */
ion-item[lines="none"] {
    --inner-padding-start: 0;
    --inner-padding-end: 0;
    display: flex;
    justify-content: center;
}

ion-item[lines="none"] ion-text,
ion-item[lines="none"] p {
    flex: 1 1 100%;
    text-align: center;
}

/* Footer respects bottom inset */
ion-footer {
    padding-block-end: calc(env(safe-area-inset-bottom, 0px) + clamp(1.5rem, 1vh, 3rem));
    padding-inline: clamp(1rem, 4vw, 2rem);
    text-align: center;
}